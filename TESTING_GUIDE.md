# 任務模組修復測試指南
# Task Module Fix Testing Guide

> **修復分支**: `copilot/fix-crud-operations-tree-view`  
> **修復日期**: 2025-12-13  
> **測試人員**: [請填寫]  
> **測試日期**: [請填寫]

---

## 📋 修復內容摘要

本次修復解決了以下三個問題：

1. ✅ **樹狀視圖缺少 CRUD 操作** - 已添加編輯/刪除功能到樹狀、看板、甘特圖視圖
2. ✅ **編輯取消後任務消失** - 添加防護機制，modal 關閉後重新載入確保一致性
3. ✅ **缺少圖標** - 已添加列表、樹狀、甘特圖視圖的圖標

---

## 🚀 測試前準備

### 1. 環境準備
```bash
# 切換到修復分支
git checkout copilot/fix-crud-operations-tree-view

# 安裝依賴
yarn install

# 啟動開發伺服器
yarn start
```

### 2. 測試資料準備
- 確保有一個測試用藍圖（Blueprint）
- 至少建立 5-10 個測試任務
- 任務包含不同狀態（待處理、進行中、已完成）
- 任務包含不同優先級（低、中、高、緊急）

---

## 🧪 測試案例

### 測試案例 1: 樹狀視圖 CRUD 功能

#### 1.1 編輯功能
**步驟**:
1. 切換到「樹狀視圖」tab
2. 將滑鼠移到任一任務上
3. 應該看到編輯和刪除按鈕出現
4. 點擊「編輯」按鈕
5. 修改任務標題（例如加上 "[已編輯]"）
6. 點擊「更新」按鈕

**預期結果**:
- ✅ Hover 時顯示操作按鈕
- ✅ Modal 正確打開並顯示任務資料
- ✅ 儲存後任務更新成功
- ✅ 成功訊息顯示
- ✅ 樹狀視圖自動刷新顯示更新後的資料

**實際結果**: [ ] 通過 / [ ] 失敗  
**備註**: ___________________________

#### 1.2 編輯取消功能（關鍵測試）
**步驟**:
1. 在樹狀視圖中，hover 到任一任務
2. 點擊「編輯」按鈕
3. 修改任一欄位（但不儲存）
4. 點擊「取消」按鈕
5. Modal 關閉後，檢查該任務是否仍然存在

**預期結果**:
- ✅ Modal 正確關閉
- ✅ **任務仍然存在於樹狀視圖中**（關鍵！）
- ✅ 任務資料未被修改
- ✅ 沒有錯誤訊息

**實際結果**: [ ] 通過 / [ ] 失敗  
**備註**: ___________________________

#### 1.3 刪除功能
**步驟**:
1. 在樹狀視圖中，hover 到任一任務
2. 點擊「刪除」按鈕
3. 確認刪除操作

**預期結果**:
- ✅ 刪除確認提示出現
- ✅ 確認後任務被刪除
- ✅ 成功訊息顯示
- ✅ 樹狀視圖自動更新

**實際結果**: [ ] 通過 / [ ] 失敗  
**備註**: ___________________________

---

### 測試案例 2: 看板視圖 CRUD 功能

#### 2.1 編輯功能
**步驟**:
1. 切換到「看板視圖」tab
2. 將滑鼠移到任一任務卡片上
3. 應該看到編輯和刪除按鈕出現在卡片底部
4. 點擊「編輯」按鈕
5. 修改任務描述
6. 點擊「更新」按鈕

**預期結果**:
- ✅ Hover 時顯示操作按鈕
- ✅ Modal 正確打開
- ✅ 儲存後任務更新成功
- ✅ 看板視圖自動刷新

**實際結果**: [ ] 通過 / [ ] 失敗  
**備註**: ___________________________

#### 2.2 編輯取消功能
**步驟**:
1. 在看板視圖中，hover 到任一任務卡片
2. 點擊「編輯」按鈕
3. 修改優先級欄位
4. 點擊「取消」按鈕
5. 檢查任務卡片是否仍然存在

**預期結果**:
- ✅ Modal 正確關閉
- ✅ **任務卡片仍然存在**
- ✅ 優先級未被修改

**實際結果**: [ ] 通過 / [ ] 失敗  
**備註**: ___________________________

#### 2.3 拖放功能（確保不受影響）
**步驟**:
1. 拖動一個任務到不同的狀態欄位
2. 檢查任務狀態是否更新

**預期結果**:
- ✅ 拖放功能正常
- ✅ 任務狀態更新成功
- ✅ 成功訊息顯示

**實際結果**: [ ] 通過 / [ ] 失敗  
**備註**: ___________________________

---

### 測試案例 3: 甘特圖視圖 CRUD 功能

#### 3.1 編輯功能
**步驟**:
1. 切換到「甘特圖視圖」tab
2. 將滑鼠移到任一任務列（左側任務名稱區域）
3. 應該看到編輯和刪除按鈕出現
4. 點擊「編輯」按鈕
5. 修改任務的開始日期和結束日期
6. 點擊「更新」按鈕

**預期結果**:
- ✅ Hover 時顯示操作按鈕
- ✅ Modal 正確打開
- ✅ 儲存後任務更新成功
- ✅ 甘特圖自動刷新顯示新的時間範圍

**實際結果**: [ ] 通過 / [ ] 失敗  
**備註**: ___________________________

#### 3.2 編輯取消功能
**步驟**:
1. 在甘特圖視圖中，hover 到任一任務列
2. 點擊「編輯」按鈕
3. 修改進度欄位
4. 點擊「取消」按鈕
5. 檢查任務是否仍然顯示

**預期結果**:
- ✅ Modal 正確關閉
- ✅ **任務仍然顯示在甘特圖中**
- ✅ 進度未被修改

**實際結果**: [ ] 通過 / [ ] 失敗  
**備註**: ___________________________

#### 3.3 甘特圖功能（確保不受影響）
**步驟**:
1. 測試縮放功能（日視圖、週視圖、月視圖切換）
2. 測試里程碑顯示
3. 測試任務進度條顯示

**預期結果**:
- ✅ 所有甘特圖功能正常
- ✅ 視覺效果正確

**實際結果**: [ ] 通過 / [ ] 失敗  
**備註**: ___________________________

---

### 測試案例 4: 列表視圖功能（確保不受影響）

#### 4.1 CRUD 功能
**步驟**:
1. 切換到「列表視圖」tab
2. 測試編輯和刪除功能
3. 確認功能正常且未受影響

**預期結果**:
- ✅ 編輯功能正常
- ✅ 刪除功能正常
- ✅ 表格顯示正常

**實際結果**: [ ] 通過 / [ ] 失敗  
**備註**: ___________________________

---

### 測試案例 5: 圖標顯示

#### 5.1 Tab 圖標
**步驟**:
1. 檢查所有視圖 tab 的圖標

**預期結果**:
- ✅ 列表視圖 tab 顯示列表圖標（三條橫線）
- ✅ 樹狀視圖 tab 顯示樹狀圖標（分層結構）
- ✅ 看板視圖 tab 顯示看板圖標（方塊）
- ✅ 時間線視圖 tab 顯示時鐘圖標
- ✅ 甘特圖視圖 tab 顯示圖表圖標（長條圖）

**實際結果**: [ ] 通過 / [ ] 失敗  
**備註**: ___________________________

---

### 測試案例 6: Bug 重現測試（關鍵）

#### 6.1 原始 Bug 重現
**目的**: 驗證原始回報的 bug 是否已修復

**步驟**:
1. 建立一個新任務
2. 立即切換到樹狀視圖確認任務存在
3. 點擊編輯按鈕打開 modal
4. **不做任何修改**，直接點擊「取消」
5. 檢查任務是否仍然存在於樹狀視圖中

**預期結果**:
- ✅ 任務在建立後正確顯示
- ✅ 編輯 modal 正確打開
- ✅ 取消後 modal 關閉
- ✅ **任務仍然存在於樹狀視圖中**（不會消失）

**實際結果**: [ ] 通過 / [ ] 失敗  
**備註**: ___________________________

#### 6.2 多次編輯取消測試
**步驟**:
1. 選擇一個任務
2. 重複以下步驟 5 次：
   - 點擊編輯
   - 修改某個欄位
   - 點擊取消
3. 每次取消後確認任務仍然存在

**預期結果**:
- ✅ 每次取消後任務都存在
- ✅ 任務資料保持原始狀態
- ✅ 沒有錯誤訊息

**實際結果**: [ ] 通過 / [ ] 失敗  
**備註**: ___________________________

---

## 🐛 Bug 回報格式

如果發現問題，請使用以下格式回報：

```markdown
### Bug #[編號]

**測試案例**: [案例編號和名稱]
**重現步驟**:
1. 
2. 
3. 

**預期行為**: 

**實際行為**: 

**截圖**: [如果有]

**環境資訊**:
- 瀏覽器: 
- 版本: 
- 作業系統: 

**錯誤訊息**: [瀏覽器 Console 的錯誤]
```

---

## ✅ 測試簽核

### 測試總結
- 總測試案例數: 14
- 通過案例數: ___
- 失敗案例數: ___
- 跳過案例數: ___

### 關鍵測試結果
- [ ] 樹狀視圖 CRUD 功能完整
- [ ] 看板視圖 CRUD 功能完整
- [ ] 甘特圖視圖 CRUD 功能完整
- [ ] **編輯取消不會導致任務消失**（關鍵）
- [ ] 所有圖標正確顯示
- [ ] 現有功能未受影響

### 測試人員簽名
測試人員: _______________  
測試日期: _______________  
簽名: _______________

### 審核人員簽名
審核人員: _______________  
審核日期: _______________  
簽名: _______________

---

## 📝 備註

### 已知限制
- 無

### 未來優化建議
1. 考慮添加批量操作功能
2. 考慮添加任務搜尋/過濾功能
3. 優化大量任務時的載入效能

### 相關文件
- Pull Request: [PR 連結]
- Issue: [Issue 連結]
- 技術文件: [文件連結]

---

**測試完成後，請將此文件連同測試結果一起提交到專案倉庫。**
